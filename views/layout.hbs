<!DOCTYPE html>
<html>

<head>
	<title>Shoping Cart</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--===============================================================================================-->
	<link rel="icon" type="image/png" href="images/icons/favicon.png" />
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/iconic/css/material-design-iconic-font.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/linearicons-v1.0.0/icon-font.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/daterangepicker/daterangepicker.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/slick/slick.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/MagnificPopup/magnific-popup.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/perfect-scrollbar/perfect-scrollbar.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="stylesheets/util.css">
	<link rel="stylesheet" type="text/css" href="stylesheets/main.css">
	<!--===============================================================================================-->
	<!--=== Font awesome ====-->
	<script src="https://kit.fontawesome.com/51d5218d26.js" crossorigin="anonymous"></script>
	<!--ajx-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<!--model-->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
</head>

<body>
	<!-- Header -->
	<header class="header-v4">
		<!-- Header desktop -->
		<div class="container-menu-desktop">
			<!-- Topbar -->
			<div class="top-bar">
				<div class="content-topbar flex-sb-m h-full container">
					<div class="left-top-bar">
						Miễn phí vận chuyển với đơn hàng trên 1 000 000₫
					</div>

					<div class="right-top-bar flex-w h-full">
						<a href="#" class="flex-c-m trans-04 p-lr-25">
							Trợ giúp
						</a>
						{{#if isAuthenticated}}
							<a href="/profile" id="usernameAuthenticated" class="flex-c-m trans-04 p-lr-25">Chào {{user.name}}</a>
							<a href="/logout" class="flex-c-m trans-04 p-lr-25">
								Đăng xuất
							</a>
						{{else}}
							<a href="login" class="flex-c-m trans-04 p-lr-25">
							Đăng nhập
						</a>
						<a href="register" class="flex-c-m trans-04 p-lr-25">
							Đăng ký
						</a>
						{{/if}}
					</div>
				</div>
			</div>

			<div class="wrap-menu-desktop">
				<nav class="limiter-menu-desktop container">

					<!-- Logo desktop -->
					<a href="/" class="logo">
						<img src="images/icons/logo-01.png" alt="IMG-LOGO">
					</a>

					<!-- Menu desktop -->
					<div class="menu-desktop">
						<ul class="main-menu">
							<li>
								<a href="/">Trang chủ</a>
							</li>

							<li>
								<a href="about">Thông tin</a>
							</li>

							<li>
								<a href="contact">Liên hệ</a>
							</li>
						</ul>
					</div>

					<!-- Icon header -->
					
					<div id="totalQuantity" class="wrap-icon-header flex-w flex-r-m">
						{{#if session.cart}}
						<a href="/shoping-cart">
						<div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti js-show-cart"
							data-notify={{session.cart.totalQuantity}}>
							
							<i class="zmdi zmdi-shopping-cart"></i>
							
						</div>
						</a>
						{{else}}
						<div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti js-show-cart"
							data-notify="0">
							<a href="/shoping-cart" class="zmdi zmdi-shopping-cart">
							</a>
						</div>
						{{/if}}
					</div>
				</nav>
			</div>
		</div>

		<!-- Header Mobile -->
		<div class="wrap-header-mobile">
			<!-- Logo moblie -->
			<div class="logo-mobile">
				<a href="/"><img src="images/icons/logo-01.png" alt="IMG-LOGO"></a>
			</div>

			<!-- Icon header -->
			<div class="wrap-icon-header flex-w flex-r-m m-r-15">

				<div class="icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10 icon-header-noti js-show-cart"
					data-notify={{session.cart.totalQuantity}}>
					<i class="zmdi zmdi-shopping-cart"></i>
				</div>

				<a href="#" class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10 icon-header-noti"
					data-notify="0">
					<i class="zmdi zmdi-favorite-outline"></i>
				</a>
			</div>

			<!-- Button show menu -->
			<div class="btn-show-menu-mobile hamburger hamburger--squeeze">
				<span class="hamburger-box">
					<span class="hamburger-inner"></span>
				</span>
			</div>
		</div>


		<!-- Menu Mobile -->
		<div class="menu-mobile">
			<ul class="topbar-mobile">
				<li>
					<div class="left-top-bar">
						Miễn phí vận chuyển với đơn hàng trên 1 000 000₫
					</div>
				</li>

				<li>
					<div class="right-top-bar flex-w h-full">
						<a href="#" class="flex-c-m p-lr-10 trans-04">
							Trợ giúp
						</a>

						<a href="#" class="flex-c-m p-lr-10 trans-04">
							Tài khoản
						</a>
					</div>
				</li>
			</ul>

			<ul class="main-menu-m">
				<li>
					<a href="/">Home</a>
				</li>

				<li>
					<a href="about">Thông tin</a>
				</li>

				<li>
					<a href="contact">Liên hệ</a>
				</li>
			</ul>
		</div>

		<!-- Modal Search -->
		<div class="modal-search-header flex-c-m trans-04 js-hide-modal-search">
			<div class="container-search-header">
				<button class="flex-c-m btn-hide-modal-search trans-04 js-hide-modal-search">
					<img src="images/icons/icon-close2.png" alt="CLOSE">
				</button>

				<form action="/search-title" metod = "GET" class="wrap-search-header flex-w p-l-15">
					<button class="flex-c-m trans-04">
						<i class="zmdi zmdi-search"></i>
					</button>
					<input class="plh3" type="text" name="search_title" placeholder="Nhập tên sách cần tìm">
				</form>
			</div>
		</div>
	</header>

	{{{body}}}
	<!--footer-->
	<footer class="bg3 p-t-75 p-b-32">
		<div class="container">
			<div class="row">
				<div class="col-sm-6 col-lg-3 p-b-50">
					<h4 class="stext-301 cl0 p-b-30">
						Danh mục
					</h4>

					<ul>
						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								Nữ
							</a>
						</li>

						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								Nam
							</a>
						</li>

						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								Giày
							</a>
						</li>

						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								Đồng hồ
							</a>
						</li>
					</ul>
				</div>

				<div class="col-sm-6 col-lg-3 p-b-50">
					<h4 class="stext-301 cl0 p-b-30">
						Trợ giúp
					</h4>

					<ul>
						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								Theo dõi đơn hàng
							</a>
						</li>

						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								Trả hàng
							</a>
						</li>

						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								Vận chuyển
							</a>
						</li>

						<li class="p-b-10">
							<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
								Hỏi đáp
							</a>
						</li>
					</ul>
				</div>

				<div class="col-sm-6 col-lg-3 p-b-50">
					<h4 class="stext-301 cl0 p-b-30">
						Liên hệ trực tiếp
					</h4>

					<p class="stext-107 cl7 size-201">
						Nếu có bất kỳ câu hỏi nào cần giải đáp, hãy đến gặp mặt trực tiếp chúng tôi tại 271 Nguyễn Văn
						Cừ,
						Quận 5, Tp Hồ Chí Minh hoặc liên hệ qua số điện thoại: 0123 456 789
					</p>

					<div class="p-t-27">
						<a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
							<i class="fa fa-facebook"></i>
						</a>

						<a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
							<i class="fa fa-instagram"></i>
						</a>

						<a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
							<i class="fa fa-pinterest-p"></i>
						</a>
					</div>
				</div>

				<div class="col-sm-6 col-lg-3 p-b-50">
					<h4 class="stext-301 cl0 p-b-30">
						Email
					</h4>

					<form>
						<div class="wrap-input1 w-full p-b-4">
							<input class="input1 bg-none plh1 stext-107 cl7" type="text" name="email"
								placeholder="email@example.com">
							<div class="focus-input1 trans-04"></div>
						</div>
					</form>
				</div>
			</div>

			<div class="p-t-40">
				<div class="flex-c-m flex-w p-b-18">
					<a href="#" class="m-all-1">
						<img src="images/icons/icon-pay-01.png" alt="ICON-PAY">
					</a>

					<a href="#" class="m-all-1">
						<img src="images/icons/icon-pay-02.png" alt="ICON-PAY">
					</a>

					<a href="#" class="m-all-1">
						<img src="images/icons/icon-pay-03.png" alt="ICON-PAY">
					</a>

					<a href="#" class="m-all-1">
						<img src="images/icons/icon-pay-04.png" alt="ICON-PAY">
					</a>

					<a href="#" class="m-all-1">
						<img src="images/icons/icon-pay-05.png" alt="ICON-PAY">
					</a>
				</div>

				<p class="stext-107 cl6 txt-center">
					<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
					Copyright &copy;
					<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is
					made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com"
						target="_blank">Colorlib</a>
					<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->

				</p>
			</div>
		</div>
	</footer>


	<!-- Back to top -->
	<div class="btn-back-to-top" id="myBtn">
		<span class="symbol-btn-back-to-top">
			<i class="zmdi zmdi-chevron-up"></i>
		</span>
	</div>
	<!--===============================================================================================-->
	<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
	<!--===============================================================================================-->
	<script src="vendor/animsition/js/animsition.min.js"></script>
	<!--===============================================================================================-->
	<script src="vendor/bootstrap/js/popper.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
	<!--===============================================================================================-->
	<script src="vendor/select2/select2.min.js"></script>
	<script src="https://www.jsviews.com/download/jsrender.min.js"></script>
	<script>
		$(".js-select2").each(function () {
			$(this).select2({
				minimumResultsForSearch: 20,
				dropdownParent: $(this).next('.dropDownSelect2')
			});
		})
	</script>
	<script>
		if ($("section").hasClass(".section-slide")) {
			$("header").removeClass("header-v4");
		}
	</script>
	<!--===============================================================================================-->
	<script src="vendor/daterangepicker/moment.min.js"></script>
	<script src="vendor/daterangepicker/daterangepicker.js"></script>
	<!--===============================================================================================-->
	<script src="vendor/slick/slick.min.js"></script>
	<script src="js/slick-custom.js"></script>
	<!--===============================================================================================-->
	<script src="vendor/parallax100/parallax100.js"></script>
	<script>
		$('.parallax100').parallax100();
	</script>
	<!--===============================================================================================-->
	<script src="vendor/MagnificPopup/jquery.magnific-popup.min.js"></script>
	<script>
		$('.gallery-lb').each(function () { // the containers for all your galleries
			$(this).magnificPopup({
				delegate: 'a', // the selector for gallery item
				type: 'image',
				gallery: {
					enabled: true
				},
				mainClass: 'mfp-fade'
			});
		});
	</script>
	<!--===============================================================================================-->
	<script src="vendor/isotope/isotope.pkgd.min.js"></script>
	<!--===============================================================================================-->
	<script src="vendor/sweetalert/sweetalert.min.js"></script>
	<script>
		$('.js-addwish-b2').on('click', function (e) {
			e.preventDefault();
		});

		$('.js-addwish-b2').each(function () {
			var nameProduct = $(this).parent().parent().find('.js-name-b2').html();
			$(this).on('click', function () {
				swal(nameProduct, "is added to wishlist !", "success");

				$(this).addClass('js-addedwish-b2');
				$(this).off('click');
			});
		});

		$('.js-addwish-detail').each(function () {
			var nameProduct = $(this).parent().parent().parent().find('.js-name-detail').html();

			$(this).on('click', function () {
				swal(nameProduct, "is added to wishlist !", "success");

				$(this).addClass('js-addedwish-detail');
				$(this).off('click');
			});
		});

		/*---------------------------------------------*/

		$('.js-addcart-detail').each(function () {
			var nameProduct = $(this).parent().parent().parent().parent().find('.js-name-detail').html();
			$(this).on('click', function () {
				swal(nameProduct, "is added to cart !", "success");
			});
		});

	</script>
	<!--===============================================================================================-->
	<script src="vendor/perfect-scrollbar/perfect-scrollbar.min.js"></script>
	<script>
		$('.js-pscroll').each(function () {
			$(this).css('position', 'relative');
			$(this).css('overflow', 'hidden');
			var ps = new PerfectScrollbar(this, {
				wheelSpeed: 1,
				scrollingThreshold: 1000,
				wheelPropagation: false,
			});

			$(window).on('resize', function () {
				ps.update();
			})
		});
	</script>
	<!--===============================================================================================-->
	<script src="js/main.js"></script>
	
	
	<!--Sort====================================-->
	<script>
		$(document).ready(function () {
			//check sort by
			let searchParams = new URLSearchParams(window.location.search);
			const sortBy = searchParams.get('sort');
			if(sortBy=="asc-price")
				$('#sort-by-asc-price').parent().addClass('sort-active');
			else if(sortBy=="desc-price")
				$("#sort-by-desc-price").parent().addClass('sort-active');
			else
				$('#sort-by-title').parent().addClass('sort-active');


			$('#sort-by-title').on('click', sort);
			$("#sort-by-asc-price").on('click', sort);
			$("#sort-by-desc-price").on('click', sort);
			//sort function
			function sort() {
				const param = $(this).attr("name");
				let currentURL = window.location.href;
				let url = updateQueryStringParameter(currentURL, 'sort', param);
				window.location.href = url;
			}
			function updateQueryStringParameter(uri, key, value) {
				var re = new RegExp("([?&])" + key + "=.*?(&|$)", "i");
				var separator = uri.indexOf('?') !== -1 ? "&" : "?";
				if (uri.match(re)) {
					return uri.replace(re, '$1' + key + "=" + value + '$2');
				}
				else {
					return uri + separator + key + "=" + value;
				}
			}
		})		
	</script>
	<script>
	//pagination
		$(document).ready(function () {
			//number products
			const products_per_page = 8;
			const total_products = parseInt($('#total-product').text());
			if(total_products==0){
				$('#info-about-num-product').css('display', 'none');
				$('#page-number').css('display', 'none');
				return;
			}
			let searchParams = new URLSearchParams(window.location.search);
			var page = searchParams.get('page');
			if (page == null)
				page = 0;
			parse = parseInt(page);
			var begin_product;
			if (total_products > 0)
				begin_product = page * products_per_page + 1;
			var end_product;
			if (begin_product + products_per_page - 1 > total_products)
				end_product = total_products;
			else
				end_product = begin_product + products_per_page - 1;
			$('#begin-product').text(begin_product);
			$('#end-product').text(end_product);


			//page number
			page++;
			var max_page = parseInt(total_products / products_per_page);
			if (total_products % products_per_page != 0)
				max_page += 1;
			if ((page - 2 >= 1) && (page + 2 <= max_page)) {
				for (var i = page - 2; i <= page + 2; i++)
					$('#page-number').append("<a  class='page-link-number'><li class='page-item-number'>" + i + "</li></a>");
			} else if ((page - 2 < 1) && (max_page >= 5)) {
				for (var i = 1; i <= 5; i++)
					$('#page-number').append("<a  class='page-link-number'><li class='page-item-number'>" + i + "</li></a>");
			} else if ((max_page >= 5) && (page + 2 > max_page)) {
				for (var i = max_page - 4; i <= max_page; i++)
					$('#page-number').append("<a class='page-link-number'><li class='page-item-number'>" + i + "</li></a>");
			} else {
				for (var i = 1; i <= max_page; i++)
					$('#page-number').append("<a class='page-link-number'><li class='page-item-number'>" + i + "</li></a>");
			}

			const length = $('.page-item-number').length;
			const firts_number = parseInt($('.page-item-number').eq(0).text());
			const index_active = page - firts_number;
			$('.page-item-number').eq(index_active).addClass("page-active");
			$('#page-number').append("<a class='last-page'><li>&gt;&gt;</li></a>");

			//click on page number
			$('.page-item-number').on('click', function () {
				if (page == parseInt($(this).text()))
					return false;
				page = parseInt($(this).text()) - 1;
				let currentURL = window.location.href;
				let url = updateQueryStringParameter(currentURL, 'page', page);
				window.location.href = url;
			});

			//click on first/last page
			$('.first-page').on('click', function () {
				if (page == 1)
					return false;
				page = 0;
				let currentURL = window.location.href;
				let url = updateQueryStringParameter(currentURL, 'page', page);
				window.location.href = url;
			});
			$('.last-page').on('click', function () {
				if (page == max_page)
					return false;
				page = max_page - 1;
				let currentURL = window.location.href;
				let url = updateQueryStringParameter(currentURL, 'page', page);
				window.location.href = url;
			});

			//update query string
			function updateQueryStringParameter(uri, key, value) {
				var re = new RegExp("([?&])" + key + "=.*?(&|$)", "i");
				var separator = uri.indexOf('?') !== -1 ? "&" : "?";
				if (uri.match(re)) {
					return uri.replace(re, '$1' + key + "=" + value + '$2');
				}
				else {
					return uri + separator + key + "=" + value;
				}
			}
		})
	</script>
	<!--Filter=========================-->
	<script>
		$(document).ready(function () {
			$('#filter-by-price').on('click', filter);

			let searchParams = new URLSearchParams(window.location.search);
			const publisher = searchParams.getAll('publisher');
			const category = searchParams.getAll('category');
			const sort = searchParams.get('sort');
			let preMinPrice = searchParams.get('minPrice');
			let preMaxPrice = searchParams.get('maxPrice'); 
			const keyword = searchParams.get('keyword');

			if (publisher!=null){
				for(i = 0; i<publisher.length; i++){
					$('input.filter-by-publisher[name=' + publisher[i]+']').attr("checked", "checked");
				}
			}
			if (category!=null){
				for(i = 0;i < category.length; i++)
					$('input.filter-by-category[name=' + category[i]+']').attr("checked", "checked");
			}
			if (preMaxPrice!=null){
				$('input[name="minPrice"]').val(preMinPrice);
				$('input[name="maxPrice"]').val(preMaxPrice);
			}
				
			//event when check on checkbox
			function filter(){
				let minPrice = parseInt($('input[name="minPrice"]').val());
				let maxPrice = parseInt($('input[name="maxPrice"]').val());
				//check min price, if false -> clear input
				if (minPrice < 0 || isNaN(minPrice)){
					$('input[name="minPrice"]').val("");
					return;
				}
				//check max price, if false -> clear input
				if( isNaN(maxPrice) || maxPrice < 0 || maxPrice > 1000000 ){
					$('input[name="maxPrice"]').val("");
					return;
				}
				//check between min price and max price, if false -> show err
				if(minPrice >= maxPrice){
					$("#txt-err-price").addClass('show-err');
					return;
				}
				//update url
				
				let currentURL = "/";
				let url = "/";
				//update price to url
				if (keyword != null){
					currentURL = "search?"
					url = appendQueryStringParameter(currentURL, 'keyword', keyword);
				}
				url = appendQueryStringParameter(url, 'minPrice', minPrice);
				url = appendQueryStringParameter(url, 'maxPrice', maxPrice);

				//update publishers
				$('input.filter-by-publisher:checkbox:checked').each(function(){
					url = appendQueryStringParameter(url, 'publisher', $(this).attr('name'));
				})
				
				//update categories tp url
				$('input.filter-by-category:checkbox:checked').each(function(){
					url = appendQueryStringParameter(url, 'category', $(this).attr('name'));
				})
				//update sort
				if (sort != null)
					url = appendQueryStringParameter(url, 'sort', sort);

				//update keyword
				
				window.location.href = url;
			}

			function updateQueryStringParameter(uri, key, value) {
				var re = new RegExp("([?&])" + key + "=.*?(&|$)", "i");
				var separator = uri.indexOf('?') !== -1 ? "&" : "?";
				if (uri.match(re)) {
					return uri.replace(re, '$1' + key + "=" + value + '$2');
				}
				else {
					return uri + separator + key + "=" + value;
				}
			}
			function appendQueryStringParameter(uri, key, value) {
				var separator = uri.indexOf('?') !== -1 ? "&" : "?";
				return uri + separator + key + "=" + value;
				
			}
		})
	</script>
<<<<<<< Updated upstream
	<!--========== ADD TO CART ==========-->
	<script>
		$(document).ready(function(){
			$('.addToCart').click(function(e){
				e.preventDefault();
				const id =  $(this).parent().parent().parent().parent().attr('id');
				$.post(
					'/add-to-cart',
					{id: id},
					function(data, status){
						var html = '<div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti js-show-cart" data-notify="' + data.totalQuantity + '"><a href="/shoping-cart" class="zmdi zmdi-shopping-cart"></a></div>';
						$('#totalQuantity').html(html);
					}
				)
			});

		})
	</script>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-155390942-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-155390942-1');
	</script>

=======
>>>>>>> Stashed changes
	
</body>

</html>